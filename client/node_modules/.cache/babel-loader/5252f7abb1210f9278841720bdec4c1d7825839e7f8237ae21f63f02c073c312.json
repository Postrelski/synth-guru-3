{"ast":null,"code":"import Navbar from\"../components/Navbar\";import CartItems from\"../components/CartItems\";import Footer from\"../components/Footer\";import Update from\"../components/buttons/Update\";import Checkout from\"../components/buttons/Checkout\";import ContinueShopping from\"../components/buttons/ContinueShopping\";import\"./styles/Cart.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Cart(){// get the array from local storage\nlet products=[];if(localStorage.getItem(\"PRODUCT_ARRAY\")){products=JSON.parse(localStorage.getItem(\"PRODUCT_ARRAY\"));}// remove any 0 or negative values from products\nfor(let i=0;i<products.length;i++){if(products[i].quantity<=0){// remove this guy\nconsole.log(products[i]);products=products.filter(function(el){return el.id!=products[i].id;});}}// update the local storage\nwindow.localStorage.setItem(\"PRODUCT_ARRAY\",JSON.stringify(products));// find the total number of products\nlet total=0;products.map(x=>total+=Number(x.quantity)*Number(x.price));// Call to backend Stripe API\nconst checkout=async()=>{await fetch(\"http://localhost:4000/checkout\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({items:products})}).then(response=>{return response.json();}).then(response=>{if(response.url){window.location.assign(response.url);//forwarding user to stripe\n}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),products.length==0&&/*#__PURE__*/_jsx(\"p\",{className:\"empty_cart\",children:\"Looks like your cart is empty!\"}),products.length==0&&/*#__PURE__*/_jsx(ContinueShopping,{}),products.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"class_items_box\",children:products.map(x=>/*#__PURE__*/_jsx(CartItems,{id:x.productID,title:x.title,pic_url:x.pic_url,quantity:x.quantity,total:Number(x.quantity)*Number(x.price),href:x.href,image:\"pic\".concat(x.productID,\".png\"),price:x.price},x.productID))}),products.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"checkout_box\",children:[/*#__PURE__*/_jsx(Update,{}),/*#__PURE__*/_jsx(Checkout,{total:total,checkout:checkout})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default Cart;","map":{"version":3,"names":["Navbar","CartItems","Footer","Update","Checkout","ContinueShopping","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","products","localStorage","getItem","JSON","parse","i","length","quantity","console","log","filter","el","id","window","setItem","stringify","total","map","x","Number","price","checkout","fetch","method","headers","body","items","then","response","json","url","location","assign","children","className","productID","title","pic_url","href","image","concat"],"sources":["/Users/mattpostrel/Desktop/Synth-Guru-E-Commerce-Store-main/client/src/pages/Cart.js"],"sourcesContent":["import Navbar from \"../components/Navbar\";\nimport CartItems from \"../components/CartItems\";\nimport Footer from \"../components/Footer\";\nimport Update from \"../components/buttons/Update\";\nimport Checkout from \"../components/buttons/Checkout\";\nimport ContinueShopping from \"../components/buttons/ContinueShopping\";\nimport \"./styles/Cart.css\";\n\nfunction Cart() {\n  // get the array from local storage\n  let products = [];\n  if (localStorage.getItem(\"PRODUCT_ARRAY\")) {\n    products = JSON.parse(localStorage.getItem(\"PRODUCT_ARRAY\"));\n  }\n\n  // remove any 0 or negative values from products\n  for (let i = 0; i < products.length; i++) {\n    if (products[i].quantity <= 0) {\n      // remove this guy\n      console.log(products[i]);\n      products = products.filter(function (el) {\n        return el.id != products[i].id;\n      });\n    }\n  }\n\n  // update the local storage\n  window.localStorage.setItem(\"PRODUCT_ARRAY\", JSON.stringify(products));\n\n  // find the total number of products\n  let total = 0;\n  products.map((x) => (total += Number(x.quantity) * Number(x.price)));\n\n  // Call to backend Stripe API\n  const checkout = async () => {\n    await fetch(\"http://localhost:4000/checkout\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ items: products }),\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then((response) => {\n        if (response.url) {\n          window.location.assign(response.url); //forwarding user to stripe\n        }\n      });\n  };\n\n  return (\n    <>\n      <Navbar />\n      {products.length == 0 && (\n        <p className=\"empty_cart\">Looks like your cart is empty!</p>\n      )}\n      {products.length == 0 && <ContinueShopping />}\n      {products.length > 0 && (\n        <div className=\"class_items_box\">\n          {products.map((x) => (\n            <CartItems\n              id={x.productID}\n              key={x.productID}\n              title={x.title}\n              pic_url={x.pic_url}\n              quantity={x.quantity}\n              total={Number(x.quantity) * Number(x.price)}\n              href={x.href}\n              image={`pic${x.productID}.png`}\n              price={x.price}\n            />\n          ))}\n        </div>\n      )}\n\n      {products.length > 0 && (\n        <div className=\"checkout_box\">\n          <Update />\n          <Checkout total={total} checkout={checkout} />\n        </div>\n      )}\n\n      <Footer />\n    </>\n  );\n}\n\nexport default Cart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}